package com.bn.constant;

import com.bn.object.BN2DObject;
import com.bn.util.manager.ShaderManager;
import com.bn.util.manager.TextureManager;
import com.bn.view.GameView;

import java.util.ArrayList;
import java.util.List;

public class ChangeUtil {
	GameView gv;
	public long startTime;//??????
	public int countTime=90;//?????????
	int t=90;//?????????
	List<BN2DObject[]> gradeData=new ArrayList<BN2DObject[]>();//???????????--0????????  1????????
	List<BN2DObject[]> timerData=new ArrayList<BN2DObject[]>();//??????????--0????????  1????????
	public List<BN2DObject> currTimer=new ArrayList<BN2DObject>();//??????????--0????????  1????????
	public List<BN2DObject> currGrade=new ArrayList<BN2DObject>();//???????????--0????????  1????????
	public BN2DObject TimerBackGround;//?????????
	public int player_score=0,computer_score=0;//???1-???  2-??????¡Â?
	public ChangeUtil(GameView gv)
	{
		this.gv=gv;
		initData();//?????????????
	}
	public void initData()
	{
		//=====================2D??????start============================
		gradeData=MyHHData.createGrade();//????????????
		timerData=MyHHData.createTimer();//???????????
		TimerBackGround=new BN2DObject(890, 100, 180, 180, TextureManager.getTextures("time.png"), 
				ShaderManager.getShader(0));//?????????????
		changeGrade();//????¡Â????
		changeTimer();//???????
		//=====================2D??????end============================
	}
	public void changeGrade()//????¡Â????
	{
		currGrade.clear();
		currGrade.add(gradeData.get(0)[player_score/10]);//?????????
		currGrade.add(gradeData.get(0)[player_score%10]);//?¡Â????
		currGrade.add(gradeData.get(1)[computer_score/10]);//??????????
		currGrade.add(gradeData.get(1)[computer_score%10]);//?¡Â????
	}
	
	public void changeTimer()//????????
	{
		if(gv.Start_Game&&gv.winCount==0&&!gv.GameOver&&!gv.isPause)//????????????????§Ö????
		{
			countTime=t-(int)((System.currentTimeMillis()-startTime)/1000);
		}
		if(!gv.isTouch&&countTime<=0)//???????????0??????????
		{
			countTime=0;
			gv.GameOver=true;
		}
		currTimer.clear();//?????????????§Ò?
		if(countTime>10)
		{
			currTimer.add(timerData.get(0)[countTime/10]);//?¦Ë??
			currTimer.add(timerData.get(0)[countTime%10]);//??¦Ë??
		}else if(countTime>=0&&countTime<=10)//?????10s???????????
		{
			currTimer.add(timerData.get(1)[countTime/10]);//?¦Ë??
			currTimer.add(timerData.get(1)[countTime%10]);//??¦Ë??
		}
	}
}
